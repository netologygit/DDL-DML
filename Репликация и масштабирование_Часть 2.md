    ***Задание 2****


При вертикальном шардинге, все наши таблицы находятся на одном инстансе.
Мы можем создать три БД: книги, пользователи, магазины.
К примеру, у нас огромная таблица с пользователями.
Нам необходимо использовать партицирование, т е мы одну большую таблицу разделим на много маленьких по какому-либо принципу
К примеру, таблицу с юзерами мы разделим ,например, по user_id. У нас будет две табицы, user и user_1
Нам нужно будет сделать 2 действия над табличкой — это поставить у нашего шарда, например, user_1 то, 
что она будет наследоваться таблицей user. User будет базовой таблицей, будет содержать всю структуру, и мы, 
создавая партицию, будем указывать, что она наследуется нашей базовой таблицей. Наследованная таблица будет 
иметь все колонки родителя — той базовой таблицы, которую мы указали, а также она может иметь свои колонки, 
которые мы дополнительно туда добавим. Она будет полноценной таблицей, но унаследованной от родителя, 
и там не будет ограничений, индексов и триггеров от родителя/
2-ое действие, которое нужно сделать — это поставить ограничения. Это будет проверка, что в эту таблицу будут попадать 
данные только по нашему выбранному признаку: user_id. Партиции в таблицах нужно обязательно создавать по одинаковым полям
и четко прописывать ограничения. 


Горизонтальное шардирование, когда мы наши данные разносим на разные сервера. В идеале каждый кластер у нас состоит, как миниумум из 3 нод - мастер, синхронной и асинхронной реплики,
в случае падения мастера у нас синхронная реплика быстро возьмет на себя роль мастера, наши данные останутся консситсентны.
А вот между двумя кластерами, на которых у нас разные шарды, связи нет никакой, они совершенно независимы друг от друга.
При наличии у нас двух кластеров с разными шардингами, бэкап на кластере 1 и кластере2 запускаются по-разному, даже если нам кажется, что это происходит одномоментно. 
В то время, когда у нас происходит бэкап на кластере 1, на кластере 2 могут обновиться какие-то данные, и если у нас таблица с 1 шардинга взаимосвязана с данными на
шардинге 2, то может получиться так, что на шарде 1 у нас есть данные, а на шарде 2 их еще нет, тем самым целостность данных нарушится.
В итоге основные проблемы при использовании горизонтального шардинга: как бэкапить кластеры и как потом восстанавливать, чтобы 
не нарушилась целостность данных и данные были консистентны.
Горизонтальное шардирование на практике можно использовать, когда наши данные разбиты, к примеру, по городам. 
Т е 1-ый шардинг - Москва, 2 шардинг - Питер, 3 шардинг - Казань.
Наши данные совершенно не будут пересекаться, при этом мы сможем снизить нагрузку на сервера, распределив запросы пользователей на разные кластера в соответствии с
геолокацией. А уже внутри каждого кластера мы можем создавать партицирование наших таблиц, используя вертикальное шардирование. Наши данные на каждом кластре будут
консистентны, мы легко сможем восстановить данные из бэкапа на каждом кластере, при этом не соприкасаясь с другими кластерами.





